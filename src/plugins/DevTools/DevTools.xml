<templates>
    <devtools-node t-name="TreeComponent"
        t-att-class="{
            element: props.vNode.length and !props.vNode.value,
            folded: state.folded,
            root: props.isRoot,
            &quot;self-closing&quot;: props.vNode.length == 0,
            selected: props.selectedID == props.vNode.id,
        }">
        <t t-if="props.isRoot">
            <span class="element-name" t-on-click="onClickElement">root</span>
            <t t-call="treeChildren"/>
        </t>
        <t t-else="">
            <span t-if="props.vNode.value" t-on-click="onClickElement">
                <t t-esc="name"/>
            </span>
            <t t-else="">
                <span class="element-name" t-on-click="onClickElement">
                    <t t-esc="name"/>
                </span>
                <t t-call="treeChildren"/>
            </t>
        </t>
    </devtools-node>

    <t t-name="treeChildren">
        <div class="children">
            <TreeComponent t-if="!state.folded"
                t-foreach="props.vNode.children" t-as="child"
                t-key="child.id"
                vNode="child"
                selectedID="props.selectedID"/>
        </div>
    </t>

    <devtools-path t-name="PathComponent">
        <devtools-pathnode t-foreach="props.path" t-as="vNode"
            t-key="vNode.id"
            t-att-class="{
                selected: vNode.id == props.selectedID
            }"
            t-on-click="onClickPathNode(vNode)">
            <t t-esc="vNode.type and vNode.type.toLowerCase() or &quot;?&quot;"/>
        </devtools-pathnode>
    </devtools-path>

    <devtools-info t-name="InfoComponent">
        <div class="about">
            <div class="type">
                <t t-esc="props.vNode and props.vNode.type or &quot;?&quot;"/>
                <t t-if="props.vNode and props.vNode.value">:
                    "<t t-esc="props.vNode.value"/>"
                </t>
            </div>
        </div>
        <div class="properties">
            <div>Length: <t t-esc="props.vNode.length"/></div>
            <div t-if="props.vNode.parent" t-on-click="clickParent(props.vNode)">
                Parent: <t t-esc="props.vNode.parent.type or &quot;?&quot;"/>
            </div>
        </div>
    </devtools-info>

    <jw-devtools t-name="devtools" class="closed">
        <devtools-navbar t-on-click="toggleOpen">
            <button>Inspector</button>
        </devtools-navbar>
        <devtools-contents t-on-node-selected="selectNode">
            <devtools-mainpane>
                <devtools-tree>
                    <TreeComponent
                        vNode="env.editor.vDocument.contents"
                        isRoot="true"
                        selectedID="state.selectedNode.id"/>
                </devtools-tree>
                <PathComponent
                    path="state.selectedPath"
                    selectedID="state.selectedNode.id"/>
            </devtools-mainpane>
            <devtools-sidepane>
                <InfoComponent vNode="state.selectedNode"/>
            </devtools-sidepane>
        </devtools-contents>
    </jw-devtools>
</templates>
